## 手書きメモアプリ 要件定義書

### 1. はじめに

本要件定義書は、スマートフォンおよびPCのタッチパッドに対応した手書きメモWebアプリケーションの開発に必要な機能、非機能要件を定義するものです。

### 2. アプリケーション概要

本アプリは、ユーザーが手書きでメモを作成・管理できるWebアプリケーションです。友人・知人など限定された約10名のユーザーが、アカウントを作成・ログインして利用します。作成したメモは後から編集可能で、タイトルによる検索・絞り込み、および削除が行えます。また、作成したメモを画像としてダウンロードする機能も備えます。データベースにはSupabaseを、ホスティングにはVercelを利用し、半年間の無料運用を目指します。

---

### 3. 機能要件

#### 3.1. 認証・ユーザー管理

* **ユーザー登録:** 新規ユーザーはメールアドレスとパスワードでアカウントを作成できる。
* **パスワードリセット:** ユーザーがパスワードを忘れた場合に、リセットする機能を提供する。
* **ログイン/ログアウト:** 登録済みユーザーはログインしてアプリを利用し、ログアウトできる。
* **ユーザー限定アクセス:** ログインしたユーザーのみがアプリの機能を利用できる。
* **ユーザー数:** 約10名程度の友人・知人に限定する。

#### 3.2. 手書きメモ作成・編集

* **描画インターフェース:**
    * スマートフォンの画面（タッチ入力）およびPCのタッチパッド（マウス入力）の両方で、指やスタイラスペン（スマホ）またはマウス（PC）を使って直接描画できるキャンバスを提供する。
* **描画ツール:**
    * **色変更:** 描画する線の色を選択・変更できる。
    * **太さ変更:** 描画する線の太さを選択・変更できる。
    * **消しゴム:** 描画した線を消すことができる。
    * **元に戻す/やり直し:** 直前の描画操作を取り消したり、取り消した操作をやり直したりできる。
* **タイトル設定:** メモにタイトルを付与できる。
* **メモの保存:** 作成した手書きメモ（描画データ）とタイトルを保存できる。
    * **後から編集:** 保存されたメモは、後から再度開いて追記や修正ができるよう、手書きの**描画情報はデータ（JSON形式など）としてデータベースに保存される**。

#### 3.3. メモ管理

* **メモ一覧表示:**
    * ログインしたユーザーが作成したメモを一覧で表示する。
    * 表示項目は**メモのプレビュー画像**、**タイトル**、**更新日時**とする。
    * **更新日時で並べ替え**ができる（新しい順/古い順）。
* **メモ検索・絞り込み:**
    * メモのタイトルに含まれるキーワードで検索・絞り込みができる。
* **メモ削除:** 作成済みのメモを削除できる。
* **画像ダウンロード:** 作成した手書きメモを**画像ファイル（例: PNG形式）としてダウンロード**できる。

#### 3.4. データ管理

* **データ構造:**
    * **ユーザー情報:** ユーザーID、メールアドレス、パスワードハッシュなど。
    * **メモ情報:** メモID、タイトル、関連ユーザーID、描画データ（JSON形式）、作成日時、更新日時。
* **日時管理:** メモが作成された際に`作成日時`が記録される。メモが更新された際には`更新日時`が記録される。
* **データ分離:** 各ユーザーは自分のみが作成したメモを閲覧・編集・削除できる（他のユーザーのメモは閲覧できない）。

---

### 4. 非機能要件

#### 4.1. パフォーマンス・応答性

* 一般的なスマートフォンおよびPCのWebブラウザで、手書き描画がスムーズに行えること。
* メモの保存、読み込み、一覧表示、検索が実用的な速度で行えること。

#### 4.2. セキュリティ

* **通信の暗号化:** すべての通信はHTTPSを使用して暗号化されること。
* ユーザー認証情報（パスワードなど）は安全に処理・保存されること。
* 各ユーザーのメモデータが他のユーザーから不正にアクセスされないこと。

#### 4.3. 運用・保守性

* **利用期間:** 無料の範囲で**半年間**運用できること。
* **データ量:** 10名程度のユーザーが利用する範囲でのメモデータ（描画データ含む）が、選択するデータベース（Supabase）およびホスティング（Vercel）の無料枠に収まること。

#### 4.4. 開発環境・言語・フレームワーク

* **フロントエンド:** Next.js (React, HTML, CSS, JavaScript)
* **バックエンド:** Next.js API Routes (Node.js)
* **データベース:** Supabase (PostgreSQL)
* **ホスティング:** Vercel