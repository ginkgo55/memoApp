# フロントエンド ディレクトリ構成案

本ドキュメントは、手書きメモアプリのフロントエンド（Next.js）におけるディレクトリとコンポーネントの構成案を定義します。

## 1. 設計思想

コンポーネントを役割ごとに分割し、再利用性とメンテナンス性を高めることを目指します。

- **責務の分離:** 各コンポーネントは単一の責任を持つように設計します。例えば、「描画する」コンポーネントと「描画ツールを管理する」コンポーネントは分離します。
- **Presentational / Container:** UIの見た目のみ責務を持つコンポーネント (Presentational) と、ロジック（データ取得、状態管理など）を責務に持つコンポーネント (Container) を意識的に分離します。Next.jsのApp Routerでは、Server ComponentsとClient Componentsの使い分けがこれに近いです。
- **ディレクトリ構造:** 機能や役割に基づいてコンポーネントをグルーピングします。

---

## 2. ディレクトリ構造案

Next.jsの`app`ディレクトリをベースに、以下のような`components`ディレクトリ構造を提案します。

```plaintext
memoApp
├── app/
│   ├── auth/             # 認証関連ページ (レイアウトを共有)
│   │   ├── login/page.tsx
│   │   └── signup/page.tsx
│   ├── main/             # メイン機能ページ (ヘッダーなどのレイアウトを共有)
│   │   ├── layout.tsx      # メイン機能用のレイアウト
│   │   ├── page.tsx        # メモ一覧ページ
│   │   └── memo/
│   │       ├── new/page.tsx      # 新規メモ作成ページ
│   │       └── [id]/page.tsx   # メモ編集ページ
│   ├── api/              # APIエンドポイント
│   │   ├── memos/
│   │   │   ├── route.ts
│   │   │   └── [id]/route.ts
│   └── layout.tsx          # ルートレイアウト
│
└── components/
    ├── ui/                 # 再利用可能なUI部品 (shadcn/uiなどを想定)
    │   ├── button.tsx
    │   ├── input.tsx
    │   ├── dialog.tsx      # モーダル用
    │   └── card.tsx        # カードUIのベース
    │
    ├── features/           # アプリケーションの機能単位のコンポーネント
    │   ├── auth/
    │   │   └── AuthForm.tsx      # ログイン・新規登録フォーム
    │   ├── memo/
    │   │   ├── MemoList.tsx      # メモ一覧
    │   │   ├── MemoCard.tsx      # 一覧に表示する個別のメモカード
    │   │   └── DeleteMemoButton.tsx # 削除確認モーダル付きボタン
    │   └── editor/
    │       ├── Editor.tsx        # 描画エディタ全体のコンテナ
    │       ├── DrawingCanvas.tsx # 手書き描画キャンバス
    │       └── Toolbar.tsx       # 描画ツールバー
    │
    ├── layouts/            # ページ全体のレイアウト用コンポーネント
    │   └── Header.tsx          # ログインユーザー情報やログアウトボタンを含むヘッダー
    │
    └── __tests__/          # テストコード用ディレクトリ
        ├── auth.test.tsx
        ├── memo.test.tsx
        └── editor.test.tsx
```

---

## 3. 主要コンポーネントの役割

### `components/ui/`

特定の機能に依存しない、汎用的なUIパーツを配置します。shadcn/uiなどのUIライブラリから生成されるコンポーネントがここに該当します。

### `components/layouts/`

- **`Header.tsx`**: アプリケーション全体で共通のヘッダー。ログイン状態の表示やログアウトボタンなどを持ちます。

### `components/features/`

アプリケーションの各機能に特化したコンポーネントを配置します。

- **`auth/AuthForm.tsx`**: メールアドレスとパスワードを入力するフォーム。ログインと新規登録で共通して利用します。

- **`memo/MemoList.tsx`**: メモの一覧を表示するコンテナ。Supabaseからデータを取得し、`MemoCard`をループで描画します。

- **`memo/MemoCard.tsx`**: 一覧に表示される個別のメモカード。タイトル、更新日時、プレビュー画像を表示します。

- **`editor/Editor.tsx`**: メモの作成・編集画面全体を統括するコンテナ。タイトル入力、ツールバー、キャンバスを内包し、状態管理と保存処理を担当します。

- **`editor/DrawingCanvas.tsx`**: 手書き描画を行う`<canvas>`要素。マウスやタッチイベントを処理し、描画データを状態として管理します。

- **`editor/Toolbar.tsx`**: 描画ツール（色、太さ、消しゴム、Undo/Redoなど）を選択するためのUIです。

---

## 4. ページとコンポーネントの関連

| ページ (URL)             | 主な利用コンポーネント                               | 説明                               |
| ------------------------ | ---------------------------------------------------- | ---------------------------------- |
| `/login`, `/signup`      | `features/auth/AuthForm.tsx`                         | ユーザー認証ページ                 |
| `/` (ルート)             | `layouts/Header.tsx`, `features/memo/MemoList.tsx`   | ログイン後のメモ一覧ページ         |
| `/memo/new`              | `layouts/Header.tsx`, `features/editor/Editor.tsx`   | 新規メモ作成ページ                 |
| `/memo/[id]`             | `layouts/Header.tsx`, `features/editor/Editor.tsx`   | 既存メモの編集ページ               |

